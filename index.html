import React, { useState, useEffect } from "react";

const questions = [
  {
    id: 1,
    question: "ما هي أكبر قارة في العالم من حيث السكان؟",
    options: ["أفريقيا", "آسيا", "أوروبا", "أمريكا الشمالية"],
    answer: 1,
  },
  {
    id: 2,
    question: "ما هو الكوكب الذي يعرف بالكوكب الأزرق؟",
    options: ["الأرض", "نبتون", "زحل", "أورانوس"],
    answer: 0,
  },
  // ... أضف بقية الأسئلة هنا بنفس الشكل
  // كل سؤال يكون كائن له id، question، options (مصفوفة)، و answer (رقم الاختيار الصحيح 0-3)
];

export default function QuizApp() {
  const [current, setCurrent] = useState(0);
  const [selected, setSelected] = useState(null);
  const [score, setScore] = useState(0);
  const [showResult, setShowResult] = useState(false);

  const handleOptionClick = (index) => {
    setSelected(index);
  };

  const handleNext = () => {
    if (selected === null) return alert("اختر إجابة قبل المتابعة!");
    if (selected === questions[current].answer) setScore(score + 1);
    setSelected(null);
    if (current + 1 === questions.length) {
      setShowResult(true);
    } else {
      setCurrent(current + 1);
    }
  };

  const handleRestart = () => {
    setCurrent(0);
    setScore(0);
    setSelected(null);
    setShowResult(false);
  };

  return (
    <div style={{ maxWidth: 600, margin: "20px auto", fontFamily: "Arial, sans-serif" }}>
      {!showResult ? (
        <div>
          <h2>السؤال {current + 1} من {questions.length}</h2>
          <p style={{ fontSize: 18 }}>{questions[current].question}</p>
          <div>
            {questions[current].options.map((opt, i) => (
              <button
                key={i}
                onClick={() => handleOptionClick(i)}
                style={{
                  display: "block",
                  width: "100%",
                  padding: "10px",
                  margin: "10px 0",
                  backgroundColor: selected === i ? "#4caf50" : "#f0f0f0",
                  color: selected === i ? "white" : "black",
                  border: "none",
                  borderRadius: "5px",
                  cursor: "pointer",
                  textAlign: "right",
                }}
              >
                {opt}
              </button>
            ))}
          </div>
          <button
            onClick={handleNext}
            style={{
              padding: "10px 20px",
              backgroundColor: "#2196f3",
              color: "white",
              border: "none",
              borderRadius: "5px",
              cursor: "pointer",
              marginTop: 10,
            }}
          >
            التالي
          </button>
        </div>
      ) : (
        <div style={{ textAlign: "center" }}>
          <h2>انتهى الاختبار!</h2>
          <p>لقد أجبت بشكل صحيح على {score} من أصل {questions.length} سؤال.</p>
          <p>النسبة: {(score / questions.length * 100).toFixed(2)}%</p>
          <button
            onClick={handleRestart}
            style={{
              padding: "10px 20px",
              backgroundColor: "#4caf50",
              color: "white",
              border: "none",
              borderRadius: "5px",
              cursor: "pointer",
              marginTop: 20,
            }}
          >
            أعد الاختبار
          </button>
        </div>
      )}
    </div>
  );
}
